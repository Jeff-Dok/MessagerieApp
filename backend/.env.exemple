# =========================================
# CONFIGURATION SERVEUR
# =========================================

# Environnement d'exécution (development, production, test)
NODE_ENV=development

# Port du serveur
PORT=5000

# Hôte du serveur
HOST=localhost

# URL de base de l'application
BASE_URL=http://localhost:5000

# =========================================
# BASE DE DONNÉES POSTGRESQL
# =========================================

# Hôte PostgreSQL
DB_HOST=localhost

# Port PostgreSQL
DB_PORT=5432

# Nom de la base de données
DB_NAME=messagerie_db

# Utilisateur PostgreSQL
DB_USER=postgres

# Mot de passe PostgreSQL (À CHANGER EN PRODUCTION!)
DB_PASSWORD=votre_mot_de_passe_securise

# Pool de connexions - Nombre max de connexions simultanées
DB_POOL_MAX=5

# Pool de connexions - Nombre min de connexions
DB_POOL_MIN=0

# Timeout d'acquisition de connexion (ms)
DB_POOL_ACQUIRE=30000

# Temps avant fermeture d'une connexion inactive (ms)
DB_POOL_IDLE=10000

# SSL pour PostgreSQL en production (true/false)
DB_SSL=false

# =========================================
# SÉCURITÉ JWT (JSON WEB TOKEN)
# =========================================

# Clé secrète JWT - CRITIQUE: Changez cette valeur en production!
# Générez une clé forte avec: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=super_secret_key_changez_moi_en_production_123456789abcdef

# Durée de validité du token principal
JWT_EXPIRES_IN=24h

# Durée de validité du refresh token
JWT_REFRESH_EXPIRES_IN=7d

# Algorithme de signature JWT (HS256, HS384, HS512, RS256, etc.)
JWT_ALGORITHM=HS256

# Issuer du token (nom de votre application)
JWT_ISSUER=MessagerieApp

# Audience du token
JWT_AUDIENCE=messagerie-app-users

# =========================================
# CORS ET ORIGINES AUTORISÉES
# =========================================

# Origine CORS principale (frontend)
CORS_ORIGIN=http://localhost:3000

# Origines multiples autorisées (séparées par des virgules)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000

# Autoriser les credentials (cookies, headers d'auth)
CORS_CREDENTIALS=true

# =========================================
# LIMITATION DE REQUÊTES (RATE LIMITING)
# =========================================

# Fenêtre de temps pour le rate limiting (ms) - 15 minutes par défaut
RATE_LIMIT_WINDOW_MS=900000

# Nombre maximum de requêtes par fenêtre
RATE_LIMIT_MAX_REQUESTS=100

# Rate limit strict pour l'authentification
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# Rate limit pour les uploads
UPLOAD_RATE_LIMIT_WINDOW_MS=60000
UPLOAD_RATE_LIMIT_MAX_REQUESTS=10

# =========================================
# UPLOAD D'IMAGES
# =========================================

# Taille maximale d'un fichier en bytes (5MB par défaut)
MAX_FILE_SIZE=5242880

# Types MIME d'images autorisés (séparés par des virgules)
ALLOWED_IMAGE_TYPES=image/jpeg,image/jpg,image/png,image/gif,image/webp

# Extensions d'images autorisées
ALLOWED_IMAGE_EXTENSIONS=jpeg,jpg,png,gif,webp

# Dossier de stockage temporaire des uploads
UPLOAD_TEMP_DIR=./uploads/temp

# Qualité de compression des images (0-100)
IMAGE_QUALITY=80

# Largeur maximale des images (pixels)
IMAGE_MAX_WIDTH=800

# Hauteur maximale des images (pixels)
IMAGE_MAX_HEIGHT=800

# =========================================
# PHOTOS DE PROFIL
# =========================================

# Taille maximale photo de profil (5MB)
PROFILE_PHOTO_MAX_SIZE=5242880

# Dimensions photo de profil
PROFILE_PHOTO_MAX_WIDTH=400
PROFILE_PHOTO_MAX_HEIGHT=400

# Qualité compression photo de profil
PROFILE_PHOTO_QUALITY=85

# =========================================
# EXPIRATION DES IMAGES (en minutes)
# =========================================

# Temps avant expiration d'une image après visualisation
IMAGE_EXPIRATION_TIME=5

# Intervalle de nettoyage automatique (minutes)
CLEANUP_INTERVAL=1

# Activer le nettoyage automatique (true/false)
AUTO_CLEANUP_ENABLED=true

# =========================================
# LOGS ET MONITORING
# =========================================

# Niveau de log (error, warn, info, http, verbose, debug, silly)
LOG_LEVEL=info

# Dossier des logs
LOG_DIR=./logs

# Nom du fichier de log
LOG_FILE=app.log

# Rotation des logs - Taille max avant rotation
LOG_MAX_SIZE=10m

# Rotation des logs - Nombre de fichiers à conserver
LOG_MAX_FILES=14d

# Format des logs (json, simple, combined)
LOG_FORMAT=json

# Logs en couleur dans la console (true/false)
LOG_COLORIZE=true

# =========================================
# SOCKET.IO (WEBSOCKET)
# =========================================

# Timeout du ping Socket.io (ms)
SOCKET_PING_TIMEOUT=60000

# Intervalle du ping Socket.io (ms)
SOCKET_PING_INTERVAL=25000

# Transports Socket.io autorisés (websocket, polling)
SOCKET_TRANSPORTS=websocket,polling

# Path Socket.io
SOCKET_PATH=/socket.io

# =========================================
# SESSIONS
# =========================================

# Clé secrète pour les sessions
SESSION_SECRET=session_secret_key_change_me_in_production

# Nom du cookie de session
SESSION_COOKIE_NAME=messagerie.sid

# Durée de vie du cookie (ms) - 24 heures
SESSION_COOKIE_MAX_AGE=86400000

# Cookie sécurisé (HTTPS uniquement en production)
SESSION_COOKIE_SECURE=false

# Cookie HttpOnly (protection XSS)
SESSION_COOKIE_HTTP_ONLY=true

# SameSite policy (strict, lax, none)
SESSION_COOKIE_SAME_SITE=lax

# =========================================
# EMAIL (NOTIFICATIONS)
# =========================================

# Service email (gmail, sendgrid, mailgun, etc.)
EMAIL_SERVICE=gmail

# Hôte SMTP
EMAIL_HOST=smtp.gmail.com

# Port SMTP (587 pour TLS, 465 pour SSL)
EMAIL_PORT=587

# Utiliser TLS (true/false)
EMAIL_SECURE=false

# Utilisateur email
EMAIL_USER=votre.email@gmail.com

# Mot de passe email ou clé API
EMAIL_PASSWORD=votre_mot_de_passe_app

# Email expéditeur (FROM)
EMAIL_FROM=MessagerieApp <noreply@messagerie-app.com>

# Activer les emails (true/false)
EMAIL_ENABLED=false

# =========================================
# NOTIFICATIONS PUSH
# =========================================

# Clé publique VAPID pour les notifications push
VAPID_PUBLIC_KEY=

# Clé privée VAPID
VAPID_PRIVATE_KEY=

# Email de contact pour VAPID
VAPID_SUBJECT=mailto:admin@messagerie-app.com

# =========================================
# REDIS (CACHE) - OPTIONNEL
# =========================================

# Activer Redis (true/false)
REDIS_ENABLED=false

# Hôte Redis
REDIS_HOST=localhost

# Port Redis
REDIS_PORT=6379

# Mot de passe Redis
REDIS_PASSWORD=

# Base de données Redis (0-15)
REDIS_DB=0

# Timeout de connexion Redis (ms)
REDIS_CONNECT_TIMEOUT=10000

# =========================================
# PROFILS UTILISATEURS
# =========================================

# Longueur minimale du pseudo
PSEUDO_MIN_LENGTH=3

# Longueur maximale du pseudo
PSEUDO_MAX_LENGTH=50

# Longueur maximale de la bio
BIO_MAX_LENGTH=500

# Âge minimum requis (COPPA compliance)
MINIMUM_AGE=13

# Validation manuelle des profils par admin (true/false)
REQUIRE_PROFILE_APPROVAL=true

# =========================================
# SÉCURITÉ AVANCÉE
# =========================================

# Activer Helmet.js (true/false)
HELMET_ENABLED=true

# Activer la compression gzip (true/false)
COMPRESSION_ENABLED=true

# Limite de payload JSON (en bytes)
JSON_PAYLOAD_LIMIT=10485760

# Limite de payload URL-encoded
URL_ENCODED_PAYLOAD_LIMIT=10485760

# Activer la sanitization MongoDB (protection injection)
MONGO_SANITIZE_ENABLED=true

# Bloquer les requêtes avec scripts (XSS)
XSS_PROTECTION=true

# =========================================
# PERFORMANCE
# =========================================

# Nombre de workers cluster (0 = auto selon CPU)
CLUSTER_WORKERS=0

# Timeout des requêtes HTTP (ms)
HTTP_TIMEOUT=30000

# Keep-alive timeout (ms)
KEEP_ALIVE_TIMEOUT=65000

# =========================================
# FONCTIONNALITÉS AVANCÉES
# =========================================

# Activer les réactions aux messages (true/false)
MESSAGE_REACTIONS_ENABLED=true

# Activer la recherche avancée (true/false)
ADVANCED_SEARCH_ENABLED=true

# Activer le mode hors ligne (Service Worker)
OFFLINE_MODE_ENABLED=true

# Activer les notifications push
PUSH_NOTIFICATIONS_ENABLED=false

# =========================================
# ANALYTICS ET MONITORING - OPTIONNEL
# =========================================

# Activer le monitoring (true/false)
MONITORING_ENABLED=false

# Clé API pour service de monitoring (ex: Sentry, New Relic)
MONITORING_API_KEY=

# URL du service de monitoring
MONITORING_URL=

# =========================================
# BACKUP ET MAINTENANCE
# =========================================

# Activer les backups automatiques (true/false)
AUTO_BACKUP_ENABLED=false

# Intervalle des backups (cron format: 0 2 * * *)
BACKUP_CRON=0 2 * * *

# Dossier de stockage des backups
BACKUP_DIR=./backups

# Nombre de backups à conserver
BACKUP_RETENTION_DAYS=30

# =========================================
# DÉVELOPPEMENT
# =========================================

# Afficher les requêtes SQL (true/false)
DEBUG_SQL=false

# Afficher les détails des erreurs
DEBUG_ERRORS=true

# Mode verbose pour les logs
VERBOSE_LOGS=false

# Seed la base avec des données de test au démarrage
AUTO_SEED_ON_START=false

# =========================================
# NOTES DE SÉCURITÉ
# =========================================

# IMPORTANT: En production, assurez-vous de:
# 1. Changer TOUS les secrets et mots de passe
# 2. Utiliser des clés JWT fortes (64+ caractères aléatoires)
# 3. Activer SSL/TLS pour PostgreSQL (DB_SSL=true)
# 4. Utiliser HTTPS uniquement (SESSION_COOKIE_SECURE=true)
# 5. Configurer correctement CORS_ORIGIN
# 6. Activer tous les mécanismes de sécurité
# 7. Limiter les taux de requêtes de façon appropriée
# 8. Utiliser des variables d'environnement sécurisées (ex: AWS Secrets Manager)
# 9. Ne JAMAIS commiter ce fichier avec des valeurs réelles
# 10. Faire des audits de sécurité réguliers (npm audit)