# =========================================
# CONFIGURATION SERVEUR
# =========================================

NODE_ENV=development
PORT=5000
HOST=localhost
BASE_URL=http://localhost:5000
PHP_PORT=8080

# =========================================
# BASE DE DONNÉES POSTGRESQL
# =========================================

DB_HOST=localhost
DB_PORT=5432
DB_NAME=messagerie_db
DB_USER=postgres
DB_PASSWORD=your_secure_password_here

# Pool de connexions
DB_POOL_MAX=5
DB_POOL_MIN=0
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# SSL PostgreSQL
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=true

# =========================================
# SÉCURITÉ JWT
# =========================================

# Générez une clé avec: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_generate_a_strong_random_key_here
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ALGORITHM=HS256
JWT_ISSUER=MessagerieApp
JWT_AUDIENCE=messagerie-app-users

# =========================================
# CORS
# =========================================

CORS_ORIGIN=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_CREDENTIALS=true

# =========================================
# RATE LIMITING
# =========================================

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5
UPLOAD_RATE_LIMIT_WINDOW_MS=60000
UPLOAD_RATE_LIMIT_MAX_REQUESTS=10

# =========================================
# UPLOAD D'IMAGES
# =========================================

MAX_FILE_SIZE=5242880
ALLOWED_IMAGE_TYPES=image/jpeg,image/jpg,image/png,image/gif,image/webp
ALLOWED_IMAGE_EXTENSIONS=jpeg,jpg,png,gif,webp
UPLOAD_TEMP_DIR=./uploads/temp
IMAGE_QUALITY=80
IMAGE_MAX_WIDTH=800
IMAGE_MAX_HEIGHT=800

# =========================================
# PHOTOS DE PROFIL
# =========================================

PROFILE_PHOTO_MAX_SIZE=5242880
PROFILE_PHOTO_MAX_WIDTH=400
PROFILE_PHOTO_MAX_HEIGHT=400
PROFILE_PHOTO_QUALITY=85

# =========================================
# EXPIRATION DES IMAGES
# =========================================

IMAGE_EXPIRATION_TIME=5
CLEANUP_INTERVAL=1
AUTO_CLEANUP_ENABLED=true

# =========================================
# LOGS
# =========================================

LOG_LEVEL=info
LOG_DIR=./logs
LOG_FILE=app.log
LOG_COLORIZE=true

# =========================================
# SOCKET.IO
# =========================================

SOCKET_PING_TIMEOUT=60000
SOCKET_PING_INTERVAL=25000
SOCKET_TRANSPORTS=websocket,polling
SOCKET_PATH=/socket.io

# =========================================
# SESSIONS
# =========================================

SESSION_SECRET=CHANGE_ME_generate_a_strong_random_key_here
SESSION_COOKIE_NAME=messagerie.sid
SESSION_COOKIE_MAX_AGE=86400000
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=lax

# =========================================
# PROFILS UTILISATEURS
# =========================================

PSEUDO_MIN_LENGTH=3
PSEUDO_MAX_LENGTH=50
BIO_MAX_LENGTH=500
MINIMUM_AGE=13
REQUIRE_PROFILE_APPROVAL=true

# =========================================
# SÉCURITÉ AVANCÉE
# =========================================

HELMET_ENABLED=true
COMPRESSION_ENABLED=true
JSON_PAYLOAD_LIMIT=10485760
URL_ENCODED_PAYLOAD_LIMIT=10485760

# =========================================
# DÉVELOPPEMENT
# =========================================

DEBUG_SQL=false
DEBUG_ERRORS=true
VERBOSE_LOGS=false
